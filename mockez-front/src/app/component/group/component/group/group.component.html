<div id='main' class='mx-auto h-full'>
  <div class='relative flex items-center bg-white py-3 px-5 w-full h-28'>
    <div class='w-1/12 flex justify-center'>
      <img class='w-16' src='assets/group.png' alt='group' />
    </div>
    <div class='text-sm ml-5 w-11/12'>
      <p class='font-medium uppercase'>{{ group?.name | truncate:100 }}</p>
      <p class='text-gray-500 text-justify first-letter:uppercase'>{{ group?.description | truncate: 200 }}</p>
    </div>
    <div class='absolute top-4 right-5 flex'>
      <p class='w-3 h-3 rounded-full bg-red'></p>
      <p class='w-3 h-3 ml-3 rounded-full bg-yellow'></p>
      <p class='w-3 h-3 ml-3 rounded-full bg-green'></p>
    </div>
  </div>
  <hr />
  <div class='tabs bg-white w-full'>
    <div class='flex'>
      <p
        class='w-1/2 text-center h-10 leading-10 {{ tab==="PROJECT" ? "bg-yellow text-white" : "" }} font-medium text-sm uppercase cursor-pointer'
        (click)='tab="PROJECT"'>PROJECT</p>
      <p
        class='w-1/2 text-center h-10 leading-10 {{ tab==="MEMBER" ? "bg-yellow text-white" : "" }} font-medium text-sm uppercase cursor-pointer'
        (click)='tab="MEMBER"'>MEMBER</p>
      <p
        class='w-1/2 text-center h-10 leading-10 {{ tab==="PROPERTIES" ? "bg-yellow text-white" : "" }} font-medium text-sm uppercase cursor-pointer'
        (click)='tab="PROPERTIES"'>PROPERTIES</p>
    </div>
    <hr />
    <div *ngIf='tab==="PROJECT"' class='tab'>
      <div class='text-center items-center my-5'>
        <input class='text-sm w-1/2 shadow focus:drop-shadow-xl py-2 px-5 rounded-md' [formControl]='filterProject'
               type='text'
               placeholder='{{ "label.search_placeholder" | translate }}' />
        <button class='bg-green p-2 text-sm rounded font-medium text-white hover:drop-shadow-xl ml-3'
                (click)='addProject()'>Add project
        </button>
      </div>
      <p *ngIf='!group?.projects?.length && storageProjects?.length'
         class='mt-5 text-center text-sm'>{{ 'message.no_project_match' | translate }}</p>
      <p *ngIf='!storageProjects?.length'
         class='mt-5 text-center text-sm'>{{ 'message.project_empty' | translate }}</p>
      <div class='text-sm overflow-y-scroll pb-20' *ngIf='group?.projects?.length' style='height: calc(100% - 76px)'>
        <div *ngFor='let project of group?.projects'
             class='flex bg-white justify-between rounded-md w-10/12 mx-auto shadow py-5 px-14 mt-5 relative hover:drop-shadow-xl'>
          <div class='absolute left-7 rounded-md w-1.5 h-28 bg-yellow'></div>
          <div class='left w-1/2'>
            <p class='font-medium'>
              <a [routerLink]='"/project/" + project?.id'
                 class='cursor-pointer hover:underline'>{{ project?.name | uppercase }}</a>
            </p>
            <p class='mt-3 text-gray-600 text-justify'>{{ project?.summary | truncate:200 }}</p>
          </div>
          <div class='right flex justify-between w-1/3'>
            <div>
              <p class='font-medium'>Group: {{ project?.group?.name }}</p>
              <p class='mt-3 text-gray-600'>Contributed by: 100 users</p>
              <p class='mt-3 text-gray-600'>Starred: 1000</p>
              <div class='flex h-10 items-center'>
                <button class='mt-3 bg-blue p-2 text-white font-medium rounded'>Star project</button>
                <img src='assets/icon/flying_star.png' class='ml-2 w-7 h-7' alt='flying star' />
              </div>
            </div>
            <div class='custom-color flex flex-col items-end ml-5 w-1/5'>
              <p class='w-3 h-3 mt-3 rounded-full bg-red'></p>
              <p class='w-3 h-3 mt-3 rounded-full bg-yellow'></p>
              <p class='w-3 h-3 mt-3 rounded-full bg-green'></p>
            </div>
          </div>
          <p class='mt-3 text-gray-600 absolute bottom-5'>Updated {{ project.modifiedDate! | dateDurationPipe }}</p>
        </div>
      </div>
    </div>
    <div *ngIf='tab==="MEMBER"'>
      <div class='text-center mt-5'>
        <input class='text-sm w-1/2 py-2 shadow focus:drop-shadow-xl px-5 rounded-md' [formControl]='filterGroupMember'
               type='text'
               placeholder='{{ "label.search_placeholder" | translate }}' />
        <button class='bg-green p-2 text-sm rounded font-medium text-white hover:drop-shadow-xl ml-3'
                (click)='addMember()'>Add member
        </button>
      </div>
      <p *ngIf='!group?.groupMembers?.length && storageGroupMembers?.length'
         class='mt-5 text-center text-sm'>{{ 'message.no_person_match' | translate }}</p>
      <div class='cards flex mt-5 flex-wrap'>
        <div *ngFor='let groupMember of group.groupMembers'
             class='card relative m-4 flex items-center shadow hover:drop-shadow-xl bg-white py-5 pl-10 pr-5 rounded-md w-96 h-32'>
          <div class='absolute left-4 rounded-md w-1 h-28 bg-green'></div>
          <div class='w-1/4'>
            <img class='w-20' src='assets/profile.png' alt='profile' />
          </div>
          <div class='info ml-5 w-1/2'>
            <a class='font-medium hover:underline'
               [routerLink]='"/person/" + groupMember?.user?.id'>{{ groupMember?.user?.name }}</a>
            <p class='text-sm text-gray-500'>{{ groupMember?.user?.bio }}</p>
            <p class='text-sm text-gray-500'>{{ 'Phone: +' + groupMember?.user?.phone }}</p>
          </div>
          <div class='w-1/6 flex justify-end'>
            <img class='w-5 cursor-pointer' src='assets/icon/general/leave.png' alt='leave'
                 (click)='removeUser(groupMember)' />
          </div>
          <div class='absolute top-4 right-5 flex'>
            <p class='w-3 h-3 rounded-full bg-red'></p>
            <p class='w-3 h-3 ml-3 rounded-full bg-yellow'></p>
            <p class='w-3 h-3 ml-3 rounded-full bg-green'></p>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf='tab==="PROPERTIES"' class='p-20 text-sm' [formGroup]='formGroup'>
      <div class='flex mt-5 justify-center'>
        <p class='font-medium w-1/4'>{{ 'Name: *' }}</p>
        <div class='w-3/4'>
          <input
            class='border {{ formGroup.get("name")?.invalid ? "border-red-300" : "" }} w-full py-2 pl-3 pr-14 rounded-md'
            formControlName='name' placeholder='Please enter group name'
            type='text' />
          <p *ngIf='formGroup.get("name")?.errors?.["required"]'
             class='ml-3 mt-2 text-red-500'>{{ "validator.required" | translate }}</p>
        </div>
      </div>
      <div class='flex mt-5 justify-center'>
        <p class='font-medium w-1/4'>{{ 'Description: *' }}</p>
        <div class='w-3/4'>
          <textarea
            class='border {{ formGroup.get("description")?.invalid ? "border-red-300" : "" }} w-full py-2 pl-3 pr-14 h-96 max-h-96 rounded-md outline-0'
            formControlName='description'
            placeholder='Please enter group description'
            type='text'></textarea>
          <p *ngIf='formGroup.get("description")?.errors?.["required"]'
             class='ml-3 mt-2 text-red-500'>{{ 'validator.required' | translate }}</p>
          <p *ngIf='formGroup.get("description")?.errors?.["maxlength"]'
             class='ml-3 mt-2 text-red-500'>{{ ('validator.max_length' | translate) + '4096.' }}</p>
        </div>
      </div>
      <div class='flex mt-5 justify-center'>
        <button type='button'
                class='w-1/4 outline-0 bg-red hover:drop-shadow-xl text-sm text-white rounded font-medium px-5 h-10 py-2 mr-3'
                (click)='deleteGroup()'>Delete
        </button>
        <button type='button'
                class='outline-0 w-3/4 bg-green text-sm hover:drop-shadow-xl text-white rounded font-medium px-5 h-10 py-2'
                (click)='saveGroup()'>Save changes
        </button>
      </div>
    </div>
  </div>
</div>
